- hosts: localhost
  roles:
    - ansible-role-rabbitmq
  vars:
    rabbitmq_cookie: "ABCDEFGHIJK"
    rabbitmq_env:
      foo: 1
      BAR: 2
      USE_LONGNAME: 1
    rabbitmq_plugins:
      - name: rabbitmq_management
        state: enabled
      - name: rabbitmq_trust_store
        state: disabled
    rabbitmq_flags:
      FOO: bar
    rabbitmq_users:
      - name: vagrant
        password: vagrant
        state: present
        vhost: /
      - name: guest
        state: absent
        vhost: /
        password: guest
    rabbitmq_config: |
      [
        {rabbit,
         [
          {tcp_listeners, [5672] },
          {log_levels, [{connection, info}]},
          {vm_memory_high_watermark, 0.4},
          {vm_memory_high_watermark_paging_ratio, 0.5},
          {disk_free_limit, "50MB"}
         ]
        }
      ].
    rabbitmq_cluster_enable: yes
    rabbitmq_cluster_name: "foo"
    rabbitmq_cluster_nodes:
      - "{{ ansible_fqdn }}"
